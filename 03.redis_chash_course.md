# Secci√≥n 03: Redis - Curso Intensivo

---

## üîπ Introducci√≥n a Redis

`Redis (Remote Dictionary Server)` es una base de datos `NoSQL`, en memoria, de estructura de datos `clave-valor`.
Es ampliamente reconocida por su alto rendimiento, baja latencia y su versatilidad para resolver distintos problemas
de arquitectura de software. Su enfoque en el almacenamiento en memoria hace que sea incre√≠blemente r√°pido en
comparaci√≥n con otras bases de datos que dependen del disco.

### ‚úÖ Caracter√≠sticas principales

- üöÄ `Velocidad extrema`: Redis opera en `memoria RAM`, lo que permite tiempos de respuesta del orden de microsegundos.
- üîÑ `Persistencia opcional`: Aunque es una base de datos en memoria, puede configurarse para guardar datos en disco,
  usando mecanismos como RDB snapshots o AOF (Append-Only File).
- ‚öôÔ∏è `Estructuras de datos avanzadas`: A diferencia de otras bases de datos `clave-valor` simples, `Redis` ofrece
  estructuras como:
    - Strings
    - Lists
    - Sets
    - Hashes
    - Sorted Sets
    - Bitmaps
    - HyperLogLogs
    - Streams
    - Geo data

- üîÅ Soporte para replicaci√≥n, clustering y alta disponibilidad.
- üß© Extensibilidad mediante m√≥dulos adicionales.

### üß† Piensa en Redis como

> Un servidor de estructuras de datos multiprop√≥sito, que vive en memoria y responde con extrema rapidez.
> Es √∫til no solo como base de datos, sino tambi√©n como middleware para acelerar y coordinar aplicaciones distribuidas.

### üìå Casos de uso comunes

Redis puede cumplir distintos roles dentro de una arquitectura moderna:

- üß† `Caching (Almacenamiento en cach√©)`: Ideal para almacenar resultados de consultas a bases de datos tradicionales o
  llamadas a APIs costosas, acelerando las respuestas.
- üì£ `Pub/Sub (Publicaci√≥n/Suscripci√≥n)`: Redis permite comunicaci√≥n en tiempo real entre servicios o usuarios mediante
  canales de mensajes.
- üì¨ `Message Queue (Cola de mensajes)`: Redis puede funcionar como sistema de colas, similar a RabbitMQ o Kafka, usando
  listas o streams.
- üì∫ `Streaming de datos`: Con Redis Streams, se puede manejar flujo de datos continuo (por ejemplo, logs, eventos de
  usuarios, sensores IoT).
- üåç `GeoSpatial`: Redis permite almacenar, indexar y consultar datos geoespaciales (latitud/longitud), muy √∫til para
  mapas o servicios de geolocalizaci√≥n.
- üîê `Rate limiting (limitaci√≥n de solicitudes)`: Muy usado para proteger APIs ante abusos o sobrecarga.
- ‚è±Ô∏è` Expiraci√≥n y TTL (time-to-live)`: Ideal para datos temporales o sensibles.

### üîÑ Redis en la arquitectura de una aplicaci√≥n

Redis no reemplaza a una base de datos relacional o documental como PostgreSQL o MongoDB. En lugar de eso, Redis
complementa estas tecnolog√≠as como un acelerador de rendimiento, o como componente especializado dentro de una
arquitectura m√°s robusta.

üìå Ejemplo de integraci√≥n:

- PostgreSQL para almacenamiento transaccional.
- Redis para cach√© de resultados o para gestionar sesiones de usuario.

![01.png](assets/section-03/01.png)

### üåê Ecosistema Redis

- Redis es gratuito y de c√≥digo abierto (`Open Source`).
- Existen dos portales principales que encontrar√°s al buscar informaci√≥n:
    - üîó `redis.io` ‚Äì Sitio oficial del proyecto `open source`.
    - üîó `redislabs.com` ‚Äì Redis Labs, ahora conocido como `Redis Inc.`, ofrece servicios comerciales y Redis en la
      nube (Redis Enterprise).

## üõ†Ô∏è Configuraci√≥n de Redis mediante Docker

### üîπ Componentes clave de Redis

`Redis` se compone principalmente de dos herramientas fundamentales que trabajan juntas para permitir su uso efectivo:

- üß± `redis-server`: Es el proceso principal del servidor Redis, encargado de gestionar las estructuras de datos,
  el almacenamiento en memoria, recibir comandos, mantener conexiones activas y ejecutar operaciones.
  `Es el servidor Redis propiamente dicho`.


- üñ•Ô∏è `redis-cli`: Es la herramienta de l√≠nea de comandos que permite interactuar con el `servidor Redis`. Nos permite
  conectarnos al servidor y enviarle comandos interactivos. Es esencial para pruebas, inspecci√≥n o manipulaci√≥n directa
  de datos. A trav√©s de `redis-cli`, podr√°s ejecutar comandos como `PING`, `SET`, `GET`, `DEL`, entre muchos otros.

![02.png](assets/section-03/02.png)

Estos dos componentes existen independientemente de c√≥mo decidas instalar Redis, ya sea:

- Directamente en tu sistema operativo (por ejemplo, con apt, brew, o desde el c√≥digo fuente).
- Mediante un contenedor Docker.
- A trav√©s de una distribuci√≥n en la nube.

üìå En resumen, tanto `redis-server` como `redis-cli` son elementos esenciales de `Redis` y se utilizan en todos los
entornos, no solo cuando se usa Docker.

### üì¶ Creaci√≥n del servicio Redis con Docker Compose

Para comenzar a trabajar con `Redis` en un entorno local de forma r√°pida y aislada, es muy com√∫n utilizar `Docker`.
Esto evita instalaciones complejas en el sistema operativo y permite que podamos levantar servicios reproducibles en
diferentes entornos (desarrollo, pruebas, producci√≥n).

> **Atenci√≥n: Usuario de Windows (que no desea usar Docker)**
>
> `Redis` no admite la instalaci√≥n directa en Windows. Existe una soluci√≥n alternativa. El equipo de Redis ha creado un
> v√≠deo oficial con los pasos para la instalaci√≥n de Redis en Windows,
> [disponible en YouTube](https://www.youtube.com/watch?v=1psWME8UH_0).

Para levantar el contenedor de Redis f√°cilmente, se recomienda usar `Docker Compose`, lo cual nos permite definir los
servicios en un archivo `compose.yml`. Este archivo especifica qu√© imagen usar, el nombre del contenedor, las reglas de
red, puertos expuestos, entre otros detalles.

````yml
services:
  s-redis:
    image: redis:8.0.3-alpine
    container_name: c-redis
    restart: unless-stopped
    ports:
      - '6379:6379'
````

### ‚ñ∂Ô∏è Ejecutar el contenedor

Para levantar el servicio en segundo plano (modo `detached`), usamos.

````bash
D:\programming\spring\01.udemy\03.vinoth_selvaraj\reactive-redis-masterclass\docker (feature/section-3)
$ docker compose up -d                                                                                 
[+] Running 8/8                                                                                        
 ‚úî s-redis Pulled                                                                                      
   ‚úî f18232174bc9 Already exists                                                                       
   ‚úî 10753f8102ef Pull complete                                                                        
   ‚úî a9c51c568321 Pull complete                                                                        
   ‚úî b96ac5b0d90b Pull complete                                                                        
   ‚úî 3b985785c0a3 Pull complete                                                                        
   ‚úî 4f4fb700ef54 Pull complete                                                                        
   ‚úî 6b9706545272 Pull complete                                                                        
[+] Running 2/2                                                                                        
 ‚úî Network docker_default  Created                                                                     
 ‚úî Container c-redis       Started                                                                     
````

Puedes listar los contenedores en ejecuci√≥n con el siguiente comando.

````bash
$ docker container ls -a
CONTAINER ID   IMAGE                COMMAND                  CREATED              STATUS              PORTS                                         NAMES
f37a8bd54269   redis:8.0.3-alpine   "docker-entrypoint.s‚Ä¶"   About a minute ago   Up About a minute   0.0.0.0:6379->6379/tcp, [::]:6379->6379/tcp   c-redis
````

### üß™ Probar conexi√≥n al servidor Redis

Para comprobar que el servidor Redis est√° activo y accesible, podemos ingresar al contenedor y ejecutar el cliente de
l√≠nea de comandos (`redis-cli`):

````bash
$ docker container exec -it c-redis /bin/sh
/data # redis-cli
127.0.0.1:6379> ping
PONG
127.0.0.1:6379>
````

El comando `PING` es una forma simple de testear conectividad con el servidor. La respuesta `PONG` indica que el
servidor Redis est√° funcionando correctamente y est√° aceptando comandos.

### ‚úÖ Conclusi√≥n

Gracias al uso de `Docker` y `Docker Compose`, podemos levantar una instancia funcional de `Redis` en segundos, sin
necesidad de instalar nada en el sistema operativo. Esto es especialmente √∫til para pruebas locales, desarrollo o
para integrarlo dentro de arquitecturas de microservicios.
